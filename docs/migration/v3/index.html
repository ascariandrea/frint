<!DOCTYPE html>
<html>
  <head>
    <title>Migrating from v2.x to v3.x | Frint</title>
  </head>

  <body>
    <nav class="nav">
      <div class="container">
        <div class="nav-left">
  <a href="/" class="nav-item brand">
    <img alt="Frint" class="dark" src="/img/frint-logo-7a7a7a.png" />
    <img alt="Frint" class="light" src="/img/frint-logo-fff.png" />
  </a>

  <a href="/docs" class="nav-item is-tab">
    Documentation
  </a>

  <a href="/guides" class="nav-item is-tab">
    Guides
  </a>

  <a href="/repl" class="nav-item is-tab">
    REPL
  </a>

  <a href="/about" class="nav-item is-tab">
    About
  </a>
</div>

<div class="nav-right">
  <div class="field nav-item">
    <p class="control has-icon">
      <input id="doc-search-text-box" class="input" type="text" placeholder="Search...">
      <span class="icon is-small">
        <i class="fa fa-search"></i>
      </span>
    </p>
  </div>
</div>

      </div>
    </nav>

    <section class="section">
      <div class="container">
        <div class="columns">
          <div class="column is-one-quarter">
            <div class="menu-container docs">
  <aside class="menu docs">
    <p class="menu-label">
      Quickstart
    </p>

    <ul class="menu-list">
      <li><a href="/guides/hello-world">Hello World</a></li>
    </ul>

    <p class="menu-label">
      Packages
    </p>

    <ul class="menu-list">
      <li><a href="/docs/packages/frint">frint</a></li>
      <li><a href="/docs/packages/frint-store">frint-store</a></li>
      <li><a href="/docs/packages/frint-data">frint-data</a></li>
      <li><a href="/docs/packages/frint-react">frint-react</a></li>
      <li><a href="/docs/packages/frint-react-server">frint-react-server</a></li>
      <li><a href="/docs/packages/frint-router">frint-router</a></li>
      <li><a href="/docs/packages/frint-router-react">frint-router-react</a></li>
      <li><a href="/docs/packages/frint-cli">frint-cli</a></li>
      <li><a href="/docs/packages/frint-config">frint-config</a></li>
      <li><a href="/docs/packages/frint-component-utils">frint-component-utils</a></li>
      <li><a href="/docs/packages/frint-component-handlers">frint-component-handlers</a></li>
      <li><a href="/docs/packages/frint-test-utils">frint-test-utils</a></li>
      <li><a href="/docs/packages/frint-compat">frint-compat</a></li>
    </ul>

    <p class="menu-label">
      Migration
    </p>

    <ul class="menu-list">
      <li><a href="/docs/migration/v1">Migrating to v1.x</a></li>
      <li><a href="/docs/migration/v2">Migrating to v2.x</a></li>
      <li><a href="/docs/migration/v3">Migrating to v3.x</a></li>
    </ul>

    <p class="menu-label">
      Contributing
    </p>

    <ul class="menu-list">
      <li><a href="/docs/contributing/maintainers">Maintainers guide</a></li>
    </ul>

    <p class="menu-label">
      Project
    </p>

    <ul class="menu-list">
      <li><a href="/docs/changelog">Changelog</a></li>
    </ul>
  </aside>
</div>

          </div>

          <div class="column content">
            <h1 id="migrating-from-v2-x-to-v3-x">Migrating from v2.x to v3.x</h1>
<!-- MarkdownTOC depth=1 autolink=true bracket=round -->
<ul>
<li><a href="#rxjs-imports">RxJS imports</a></li>
<li><a href="#lodash-imports">Lodash imports</a></li>
<li><a href="#webpack-builds">Webpack builds</a></li>
<li><a href="#frint-store"><code>frint-store</code></a></li>
<li><a href="#frint-model"><code>frint-model</code></a></li>
<li><a href="#frint-compat"><code>frint-compat</code></a></li>
</ul>
<!-- /MarkdownTOC -->
<h2 id="rxjs-imports">RxJS imports</h2>
<p>All RxJS modules are now imported individually, resulting in smaller bundle sizes in your applications.</p>
<p>This also means, the observables returned by FrintJS packages will not have the operators (like <code>map</code>, <code>filter</code>, etc) built in any more, and they need to be imported manually too if you need them.</p>
<h3 id="before">Before</h3>
<p>We can take an example from <code>frint-store</code>:</p>
<pre><code class="lang-js">const todos$ = store.getState$()
  .filter(state =&gt; state.showTodos === true)
  .map(state =&gt; state.todos);

todos$.subscribe(todos =&gt; console.log(todos));
</code></pre>
<h3 id="after">After</h3>
<pre><code class="lang-js">import { filter } from &#39;rxjs/operator/filter&#39;;
import { map } from &#39;rxjs/operator/map&#39;;

const todos$ = store.getState$()
  ::filter(state =&gt; state.showTodos === true)
  ::map(state =&gt; state.todos);

todos$.subscribe(todos =&gt; console.log(todos));
</code></pre>
<p>The syntax above is written using the <a href="https://github.com/tc39/proposal-bind-operator">bind-operator</a>.</p>
<p>It could also have been written like this:</p>
<pre><code class="lang-js">import { filter } from &#39;rxjs/operator/filter&#39;;
import { map } from &#39;rxjs/operator/map&#39;;

const todos$ = map.call(
  filter.call(
    store.getState$(),
    state =&gt; state.showTodos === true
  ),
  state =&gt; state.todos
);

todos$.subscribe(todos =&gt; console.log(todos));
</code></pre>
<h2 id="lodash-imports">Lodash imports</h2>
<p>All lodash imports have also been updated to import only the modules that are needed.</p>
<p>If you want to take benefit of reduced bundle size in your applications, then you can follow the same approach.</p>
<h3 id="before">Before</h3>
<pre><code class="lang-js">import _ from &#39;lodash&#39;;

_.isPlainObject({});
</code></pre>
<h2 id="after">After</h2>
<pre><code class="lang-js">import isPlainObject from &#39;lodash/isPlainObject&#39;;

isPlainObject({});
</code></pre>
<h2 id="webpack-builds">Webpack builds</h2>
<p>If your application is set up in a way like this:</p>
<ul>
<li><code>vendors.js</code>: All third party libraries (RxJS, Lodash, Frint, etc)</li>
<li><code>app.js</code>: Your custom code for Frint App(s)</li>
</ul>
<p>Or you are loading the vendors directly from CDN via <code>&lt;script&gt;</code> tags, then you risk loading some RxJS and Lodash modules twice.</p>
<p>To help avoid that, we are shipping a new <code>frint-config</code> package that has information about the list of external dependencies, that you can map accordingly.</p>
<h3 id="before">Before</h3>
<pre><code class="lang-js">// webpack.config.js
module.exports = {
  entry: __dirname + &#39;/src/index.js&#39;,
  output: {
    path: __dirname + &#39;/build&#39;
  },
  externals: {
    &#39;lodash&#39;: &#39;_&#39;, // window._
    &#39;rxjs&#39;: &#39;Rx&#39;, // window.Rx

    // other libraries
    &#39;react&#39;: &#39;React&#39;,
    &#39;react-dom&#39;: &#39;ReactDOM&#39;,
  },
}
</code></pre>
<h3 id="after">After</h3>
<pre><code class="lang-js">// webpack.js

// all RxJS and Lodash imports
// are mapped to global `window._` and `window.Rx`
const externals = require(&#39;frint-config&#39;).externals;

module.exports = {
  entry: __dirname + &#39;/src/index.js&#39;,
  output: {
    path: __dirname + &#39;/build&#39;
  },
  externals: Object.assign(
    {},

    // RxJS and Lodash
    externals,

    // other libraries
    {
      &#39;react&#39;: &#39;React&#39;,
      &#39;react-dom&#39;: &#39;ReactDOM&#39;,
    }
  ),
}
</code></pre>
<h2 id="frint-store">frint-store</h2>
<p><code>thunkArgument</code> option has been renamed to <code>deps</code>.</p>
<h3 id="before">Before</h3>
<pre><code class="lang-js">import { createStore } from &#39;frint-store&#39;;

const Store = createStore({
  thunkArgument: {},
});
</code></pre>
<h3 id="after">After</h3>
<pre><code class="lang-js">import { createStore } from &#39;frint-store&#39;;

const Store = createStore({
  deps: {},
});
</code></pre>
<h2 id="frint-model">frint-model</h2>
<p>Deprecated and will be completely removed when v4.0 gets released. Use <code>frint-data</code> instead.</p>
<h3 id="before">Before</h3>
<pre><code class="lang-js">import { createModel } from &#39;frint-model&#39;;

const Todo = createModel({
  getTitle() {
    return this.get(&#39;title&#39;);
  },
  setTitle(newTitle) {
    this.set(&#39;title&#39;, newTitle);
  },
});

const todo = new Todo({
  title: &#39;Hello World&#39;,
  completed: false,
});

const title = todo.getTitle();
todo.setTitle(&#39;Updated title&#39;);
</code></pre>
<h3 id="after">After</h3>
<pre><code class="lang-js">import { Types, createModel } from &#39;frint-data&#39;;

const Todo = createModel({
  schema: {
    title: Types.string, // or, Types.string.required
    completed: Types.bool, // or, Types.bool.defaults(false),
  },
  setTitle(newTitle) {
    this.title = newTitle;
  },
});

const todo = new Todo({
  title: &#39;Hello World&#39;,
  completed: false,
});

const title = todo.title;
todo.setTitle(&#39;Updated title&#39;);
</code></pre>
<h2 id="frint-compat">frint-compat</h2>
<p>Completely emptied, and <code>v0.x</code> is no longer supported in any way.</p>

          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <p>
        <strong>FrintJS</strong> by <a href="https://travix.com">Travix International B.V.</a>.
        The source code is licensed under
        <a href="https://github.com/Travix-International/frint/blob/master/LICENSE">MIT</a>.
      </p>
      <p>
        <a class="icon" href="https://github.com/Travix-International/frint">
          <i class="fa fa-github"></i>
        </a>
      </p>
    </div>
  </div>
</footer>


    <style>
  .github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/themes/prism-solarizedlight.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" href="/css/site.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/js/site.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: '897a7279c47670a5c4b474ee84350387',
  indexName: 'frint.js',
  inputSelector: '#doc-search-text-box',
  debug: false // Set debug to true if you want to inspect the dropdown
});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-93673400-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
